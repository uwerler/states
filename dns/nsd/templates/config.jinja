#
# This file is managed/autogenerated by Salt, do not edit by hand!!
# Modify the values passed to the nsd pillar instead.
#
{% for opt, settings in config.items() %}
{%- if settings | is_iter %}
{{ opt }}:
{%- for setting, val in settings.items() %}
{{ "%-8s" | format('',) }}{{ "%-14s" | format(setting + ":",) }} {{ val }}
{%- endfor %}
{% else %}
{{ opt }}: {{ "%-8s" | format(settings,) }}
{%- endif %}
{%- endfor %}
{%- for key in keys %}
{%- for opt, settings in key.items() %}
{%- if settings | is_iter %}
{{ opt }}:
{%- for setting, val in settings.items() %}
{{ "%-8s" | format('',) }}{{ "%-14s" | format(setting + ":",) }} {{ val }}
{%- endfor %}
{% else %}
{{ opt }}: {{ "%-8s" | format(settings,) }}
{%- endif %}
{%- endfor %}
{%- endfor %}
{%- for zone, zone_data in zones %}
{%-   if grains.id   == zone_data.get('master', {}).get('name', {}) %}
{%-      set role = "master" %}        
{%-      set options  = zone_data.get('master', {}).get('options',{}) %}
{%-   elif grains.id in zone_data.get('slaves', {}).get('names', {}) %}
{%-      set role = "slave" %}        
{%-      set options  = zone_data.get('slaves', {}).get('options', {}) %}
{%-   endif %}
zone:
{{ "%-8s" | format('',) }}{{ "%-14s" | format("name:",) }}"{{ zone }}"
{{ "%-8s" | format('',) }}{{ "%-14s" | format("zonefile:",) }}"{{ role }}/{{ zone }}"
{%- for option in options %}
{%- for opt,val in option.items() %}
{{ "%-8s" | format('',) }}{{ "%-14s" | format(opt + ":",) }}{{ val }}
{%- endfor %}
{%- endfor %}
{% endfor %}
